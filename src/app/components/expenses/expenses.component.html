<h2>Your {{ title }} Expenses</h2>

<p>{{ description }}</p>

<p-table
  [value]="expenses"
  dataKey="id"
  editMode="row"
  [editingRowKeys]="editingRowKeys"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Expense</th>
      <th>Amount</th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template
    pTemplate="body"
    let-expense
    let-editing="editing"
    let-rowIndex="rowIndex"
  >
    <tr [pEditableRow]="expense">
      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText type="text" [(ngModel)]="expense.title" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ expense.title }}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <p-inputNumber
              mode="currency"
              currency="EUR"
              class="p-inputtext-sm"
              inputStyleClass="w-full"
              name="amount"
              [minFractionDigits]="0"
              [maxFractionDigits]="2"
              [(ngModel)]="expense.amount"
            />
          </ng-template>
          <ng-template pTemplate="output">
            {{ expense.amount | currency : "EUR" : "symbol" : "2.0" }}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <div class="flex align-items-center justify-content-center gap-2">
          <button
            *ngIf="!editing"
            pButton
            pRipple
            type="button"
            pInitEditableRow
            icon="pi pi-pencil"
            class="p-button-rounded p-button-text"
            (click)="onRowEditInit(expense)"
          ></button>
          <button
            *ngIf="editing"
            pButton
            pRipple
            type="button"
            pSaveEditableRow
            icon="pi pi-check"
            class="p-button-rounded p-button-text p-button-success mr-2"
            (click)="onRowEditSave(expense)"
          ></button>
          <button
            *ngIf="editing"
            pButton
            pRipple
            type="button"
            pCancelEditableRow
            icon="pi pi-times"
            class="p-button-rounded p-button-text p-button-danger"
            (click)="onRowEditCancel(expense, rowIndex)"
          ></button>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-button
  [label]="'Add ' + title + ' Expense'"
  (onClick)="addExpense()"
></p-button>
